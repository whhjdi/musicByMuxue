(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["allSongList"],{"25f8":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"allSongList"},[e("header",{staticClass:"header border-bottom"},[e("svg",{staticClass:"icon i-back",attrs:{"aria-hidden":"true"},on:{click:t.goBack}},[e("use",{attrs:{"xlink:href":"#icon-arrowleft"}})]),e("h2",{staticClass:"title"},[t._v("歌单")])]),e("Scroll",{ref:"list",staticClass:"scroll",attrs:{data:t.playLists,pullup:t.pullup},on:{scrollToEnd:t.loadMore}},[e("div",[e("div",{staticClass:"nav"},[e("span",{staticClass:"catText border",on:{click:t.getCatList}},[t._v(t._s(t.catText)+"\n          "),e("svg",{staticClass:"icon i-back",attrs:{"aria-hidden":"true"},on:{click:t.goBack}},[e("use",{attrs:{"xlink:href":"#icon-right"}})])]),e("div",{staticClass:"sort"},[e("span",{staticClass:"new",class:{active:"new"===t.order},on:{click:t.orderNew}},[t._v("最新")]),t._v("|\n          "),e("span",{staticClass:"hot",class:{active:"hot"===t.order},on:{click:t.orderHot}},[t._v("最热")])])]),e("ul",{staticClass:"list-wrapper"},t._l(t.playLists,function(s,i){return e("li",{key:i,staticClass:"list",on:{click:function(e){return t.handleSongList(s)}}},[e("img",{staticClass:"pic",attrs:{src:s.coverImgUrl,alt:""}}),e("div",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"number"},[e("svg",{staticClass:"icon i-count",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-music"}})]),e("div",{staticClass:"count"},[t._v(t._s(t._f("setNumber")(s.playCount)))])]),e("div",{staticClass:"author"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-user"}})]),e("span",{staticClass:"nickname"},[t._v(t._s(s.creator.nickname))])])])}),0)])]),e("cat-list",{ref:"catList",attrs:{catList:t.catList},on:{selectItem:t.selectCat,selectAll:t.selectAll}}),e("router-view",{ref:"musicList",attrs:{title:t.title,picUrl:t.picUrl,songs:t.songs,id:t.discId},on:{select:t.selectItem,play:t.playAll}})],1)},a=[],n=(e("673e"),e("ac6a"),e("8615"),e("cebc")),c=(e("7f7f"),e("42ba")),r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slide-up"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showCatList,expression:"showCatList"}],staticClass:"allSongList"},[e("header",{staticClass:"header border-bottom"},[e("svg",{staticClass:"icon i-back",attrs:{"aria-hidden":"true"},on:{click:t.goBack}},[e("use",{attrs:{"xlink:href":"#icon-arrowleft"}})]),e("h2",{staticClass:"title"},[t._v("歌单分类")])]),e("Scroll",{ref:"list",staticClass:"scroll",attrs:{data:t.catList}},[e("div",{staticClass:"wrapper"},[e("div",{staticClass:"all border",on:{click:t.selectAll}},[t._v("全部歌单")]),e("ul",{staticClass:"list-wrapper"},t._l(t.catList,function(s,i){return e("li",{key:i,staticClass:"list"},[e("div",{staticClass:"sub"},[t._v(t._s(s.name))]),e("ul",{staticClass:"sub-wrapper border-bottom"},t._l(s[i],function(s){return e("li",{key:s.name,staticClass:"sub-item",on:{click:function(e){return t.selectItem(s)}}},[t._v("\n                "+t._s(s.name)+"\n              ")])}),0)])}),0)])])],1)])},o=[],l=e("3ce5"),u=e("0712"),f={name:"",components:{Scroll:l["a"]},mixins:[u["b"]],props:{catList:{type:Array,default:function(){return[]}}},data:function(){return{showCatList:!1}},watch:{},computed:{},methods:{show:function(){this.showCatList=!0},hide:function(){this.showCatList=!1},goBack:function(){this.hide()},selectItem:function(t){this.$emit("selectItem",t),this.hide()},selectAll:function(){this.$emit("selectAll"),this.hide()}},created:function(){},mounted:function(){}},h=f,d=(e("d069"),e("2877")),v=Object(d["a"])(h,r,o,!1,null,"5b230f78",null),m=v.exports,g=e("2f62"),p={name:"allSongList",components:{Scroll:l["a"],CatList:m},mixins:[u["d"],u["b"]],filters:{setNumber:function(t){return t<1e4?"<1万":"".concat(Math.ceil(t/1e4),"万")}},props:{},data:function(){return{pullup:!0,playLists:[],before:0,hasMore:!0,catText:"全部",catList:[],offset:0,order:"hot",list:[],songs:[]}},watch:{order:function(t){this.getSongList(this.catText,this.offset,t)}},computed:{title:function(){return this.list.name},picUrl:function(){return this.list.coverImgUrl},discId:function(){return this.list.id}},methods:Object(n["a"])({},Object(g["d"])({setShowFooter:"SET_SHOW_FOOTER"}),{loadMore:function(){var t=this;this.hasMore&&c["a"].getAllSongList(this.catText,this.offset,this.order).then(function(s){var e=s.playlists;t.offset=t.offset+10,t.hasMore=s.more,t.playLists=t.playLists.concat(e)})},goBack:function(){this.$router.go(-1)},getCatList:function(){var t=this;c["a"].getCatList().then(function(s){t.categories=Object.values(s.categories),t.sub=s.sub,t.$refs.catList.show();var e=[],i=s.sub,a=s.categories,n=Object.values(a);n.forEach(function(t,s){var a={name:t};a[s]=[],i.forEach(function(t){t.category===s&&a[s].push(t)}),e.push(a)}),t.catList=e})},getSongList:function(t,s,e){var i=this;c["a"].getAllSongList(t,s,e).then(function(t){var s=t.playlists;i.offset=i.offset+10,i.playLists=s,i.hasMore=t.more})},orderNew:function(){this.order="new"},orderHot:function(){this.order="hot"},handleSongList:function(t){var s=this;this.$router.push({path:"/songslist/".concat(t.id)}),c["a"].getDisc(t.id).then(function(t){s.setList(t)})},selectCat:function(t){this.catText=t.name,this.offset=0,this.getSongList(t.name,this.offset,this.order)},selectAll:function(){this.catText="全部",this.offset=0,this.getSongList(this.catText,this.offset,this.order)}}),created:function(){this.setShowFooter(!1),this.getSongList(this.catText,this.offset,this.order)},mounted:function(){}},b=p,C=(e("d929"),Object(d["a"])(b,i,a,!1,null,"927cb4b2",null));s["default"]=C.exports},"386b":function(t,s,e){var i=e("5ca1"),a=e("79e5"),n=e("be13"),c=/"/g,r=function(t,s,e,i){var a=String(n(t)),r="<"+s;return""!==e&&(r+=" "+e+'="'+String(i).replace(c,"&quot;")+'"'),r+">"+a+"</"+s+">"};t.exports=function(t,s){var e={};e[t]=s(r),i(i.P+i.F*a(function(){var s=""[t]('"');return s!==s.toLowerCase()||s.split('"').length>3}),"String",e)}},"42ba":function(t,s,e){"use strict";var i=e("d225"),a=e("b0b4"),n=e("e1d2"),c=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,null,[{key:"getBanner",value:function(){return Object(n["a"])("banner")}},{key:"getRecommend",value:function(){return Object(n["a"])("recommend")}},{key:"getRecommendSongs",value:function(){return Object(n["a"])("personalized",{params:{limit:6}})}},{key:"getNewSong",value:function(){return Object(n["a"])("newSong",{})}},{key:"getDisc",value:function(t){return Object(n["a"])("disc",{params:{id:t}})}},{key:"getNewDisc",value:function(){return Object(n["a"])("newDisc",{params:{order:"new",limit:6}})}},{key:"getResource",value:function(){return Object(n["a"])("resource",{params:{limit:6}})}},{key:"getAllSongList",value:function(t,s,e){return Object(n["a"])("newDisc",{params:{limit:10,cat:t,offset:s,order:e}})}},{key:"getCatList",value:function(){return Object(n["a"])("catList")}},{key:"getComment",value:function(t,s){return Object(n["a"])("comment",{params:{id:t,offset:s}})}}]),t}();s["a"]=c},"504c":function(t,s,e){var i=e("9e1e"),a=e("0d58"),n=e("6821"),c=e("52a7").f;t.exports=function(t){return function(s){var e,r=n(s),o=a(r),l=o.length,u=0,f=[];while(l>u)e=o[u++],i&&!c.call(r,e)||f.push(t?[e,r[e]]:r[e]);return f}}},"673e":function(t,s,e){"use strict";e("386b")("sub",function(t){return function(){return t(this,"sub","","")}})},"7d58":function(t,s,e){},8615:function(t,s,e){var i=e("5ca1"),a=e("504c")(!1);i(i.S,"Object",{values:function(t){return a(t)}})},cd8a:function(t,s,e){},d069:function(t,s,e){"use strict";var i=e("cd8a"),a=e.n(i);a.a},d929:function(t,s,e){"use strict";var i=e("7d58"),a=e.n(i);a.a}}]);
//# sourceMappingURL=allSongList.d4b1a00d.js.map
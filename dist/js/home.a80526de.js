(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"16c0":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"home",staticClass:"home"},[r("nav",[r("h2",{staticClass:"title"},[t._v("沐雪music")]),r("search-bar")],1),r("home-skeleton",{directives:[{name:"show",rawName:"v-show",value:t.showSkeleton,expression:"showSkeleton"}]}),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"scroll-wrapper"},[r("Scroll",{ref:"scrolls",staticClass:"scroll",attrs:{data:t.recommendSongs}},[r("div",{staticClass:"recommend"},[this.banners&&this.banners.length?r("div",{staticClass:"slides"},[r("slide",{attrs:{autoPlay:!0,interval:3e3,loop:!0}},t._l(t.banners,(function(t){return r("div",{key:t.imageUrl,staticClass:"slide-item"},[r("img",{staticClass:"slide-img",attrs:{src:t.imageUrl,alt:""}})])})),0)],1):t._e(),r("div",{staticClass:"recommendSongs"},[r("recommend-list",{attrs:{list:t.recommendSongs},on:{setDiscList:t.handleDisc}})],1),r("div",{staticClass:"newSongs"},[r("recommend-list",{attrs:{list:t.newDiscs,title:"最新歌单"},on:{setDiscList:t.handleDisc}})],1)])])],1),r("router-view",{ref:"musicList",attrs:{title:t.title,picUrl:t.picUrl,songs:t.songs,id:t.discId},on:{select:t.selectItem,play:t.playAll}})],1)},i=[];function a(t){if(Array.isArray(t))return t}function n(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],s=!0,i=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){i=!0,a=c}finally{try{s||null==o["return"]||o["return"]()}finally{if(i)throw a}}return r}}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,e){return a(t)||n(t,e)||o()}r("ac6a");var l=r("ade3"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"slide",staticClass:"slide"},[r("div",{ref:"slideGroup",staticClass:"slide-group"},[t._t("default")],2),r("div",{staticClass:"dots"},t._l(t.dots,(function(e,s){return r("span",{key:s,staticClass:"dot",class:{active:t.currentIndex===s}})})),0)])},d=[],u=r("1fba"),p={name:"",components:{},props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},data(){return{dots:[],currentIndex:0}},watch:{},computed:{},methods:{initDots(){this.dots=new Array(this.children.length)},setSlideWidth(t){this.children=this.$refs.slideGroup.children;let e=0,r=this.$refs.slide.clientWidth;for(let s=0;s<this.children.length;s++){let t=this.children[s];t.style.width=r+"px",e+=r}this.loop&&!t&&(e+=2*r),this.$refs.slideGroup.style.width=e+"px"},initSlide(){this.slideScroll=new u["a"](this.$refs.slide,{scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400},bounce:!0}),this.onScrollEnd(),this.onTouchEnd(),this.onBeforeScrollStart()},onScrollEnd(){this.slideScroll.on("scrollEnd",()=>{let t=this.slideScroll.getCurrentPage().pageX;this.currentIndex=t,this.autoPlay&&this.play()})},onTouchEnd(){this.slideScroll.on("touchEnd",()=>{this.autoPlay&&this.play()})},onBeforeScrollStart(){this.slideScroll.on("beforeScrollStart",()=>{this.autoPlay&&clearTimeout(this.timer)})},play(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.slideScroll.next()},this.interval)}},created(){},mounted(){setTimeout(()=>{this.setSlideWidth(),this.initDots(),this.initSlide(),this.autoPlay&&this.play()},20),window.addEventListener("resize",()=>{this.slideScroll&&(this.setSlideWidth(!0),this.slideScroll.refresh())})}},m=p,y=(r("56f8"),r("2877")),f=Object(y["a"])(m,h,d,!1,null,"6272e53c",null),g=f.exports,b=r("42ba"),w=r("3ce5"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"recommend"},[r("h2",{staticClass:"title",on:{click:t.handleClick}},[r("span",[t._v(t._s(t.title))]),r("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#icon-right"}})])]),r("ul",{staticClass:"list-wrapper"},t._l(t.list,(function(e){return r("li",{key:e.id,staticClass:"list",on:{click:function(r){return t.selectItem(e)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picUrl?e.picUrl:e.coverImgUrl,expression:"item.picUrl ? item.picUrl : item.coverImgUrl"}],staticClass:"pic",attrs:{alt:""}}),r("p",{staticClass:"name"},[t._v(t._s(e.name))]),r("div",{staticClass:"number"},[r("svg",{staticClass:"icon i-count",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#icon-music"}})]),r("div",{staticClass:"count"},[t._v(t._s(t._f("setCount")(e.playCount)))])])])})),0)])},x=[],O={name:"",components:{},filters:{setCount(t){return t<1e4?"<1万":`${Math.ceil(t/1e4)}万`}},props:{list:{type:Array,default:()=>[]},title:{type:String,default:"推荐歌单"}},data(){return{}},watch:{},computed:{},methods:{handleClick(){this.$router.push({path:"/songslist"})},selectItem(t){this.$emit("setDiscList",t)}},created(){},mounted(){}},S=O,C=(r("2c6a"),Object(y["a"])(S,v,x,!1,null,"2ab29ea2",null)),j=C.exports,D=r("5880"),k=r("76f3"),P=r("0712"),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("content-loader",{attrs:{height:400,width:375,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"}},[r("rect",{attrs:{x:"823",y:"-69",rx:"4",ry:"4",width:"117",height:"6.4"}}),r("rect",{attrs:{x:"823",y:"-49",rx:"3",ry:"3",width:"85",height:"6.4"}}),r("rect",{attrs:{x:"753",y:"-4",rx:"3",ry:"3",width:"350",height:"6.4"}}),r("rect",{attrs:{x:"753",y:"16",rx:"3",ry:"3",width:"380",height:"6.4"}}),r("rect",{attrs:{x:"753",y:"36",rx:"3",ry:"3",width:"201",height:"6.4"}}),r("circle",{attrs:{cx:"783",cy:"-54",r:"30"}}),r("rect",{attrs:{x:"9.52",y:"19.2",rx:"0",ry:"0",width:"359.36",height:"118.68"}}),r("rect",{attrs:{x:"27.72",y:"61.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"69.92",y:"70.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"14.92",y:"71.2",rx:"0",ry:"0",width:"13",height:"2"}}),r("rect",{attrs:{x:"199.92",y:"68.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"248.92",y:"78.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"7.31",y:"202.2",rx:"0",ry:"0",width:"103.32",height:"102.06"}}),r("rect",{attrs:{x:"58.31",y:"241.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"139.31",y:"199.2",rx:"0",ry:"0",width:"104.14",height:"102.87"}}),r("rect",{attrs:{x:"268.25",y:"201.2",rx:"0",ry:"0",width:"101.68",height:"100.44"}}),r("circle",{attrs:{cx:"737.34",cy:"-41.77",r:"16.03"}}),r("circle",{attrs:{cx:"31.31",cy:"172.2",r:"1"}}),r("rect",{attrs:{x:"9.31",y:"162.2",rx:"0",ry:"0",width:"61",height:"11"}}),r("circle",{attrs:{cx:"77.31",cy:"168.2",r:"0"}}),r("circle",{attrs:{cx:"746.82",cy:"-47.29",r:"8.51"}}),r("circle",{attrs:{cx:"84.1",cy:"167.99",r:"6.79"}}),r("rect",{attrs:{x:"9.31",y:"315.2",rx:"0",ry:"0",width:"359.56",height:"19"}}),r("rect",{attrs:{x:"20.31",y:"349.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"29.31",y:"346.2",rx:"0",ry:"0",width:"0",height:"0"}}),r("rect",{attrs:{x:"65.31",y:"372.2",rx:"0",ry:"0",width:"0",height:"0"}})])},L=[],A=r("92fa"),E=r.n(A),N=function(){return Math.random().toString(36).substring(2)},$={name:"ContentLoader",functional:!0,props:{width:{type:Number,default:400},height:{type:Number,default:130},speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:"xMidYMid meet"},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},render:function(t,e){var r=e.props,s=e.data,i=e.children,a=r.uniqueKey?r.uniqueKey+"-idClip":N(),n=r.uniqueKey?r.uniqueKey+"-idGradient":N();return t("svg",E()([s,{attrs:{viewBox:"0 0 "+r.width+" "+r.height,version:"1.1",preserveAspectRatio:r.preserveAspectRatio}}]),[t("rect",{style:{fill:"url("+r.baseUrl+"#"+n+")"},attrs:{"clip-path":"url("+r.baseUrl+"#"+a+")",x:"0",y:"0",width:r.width,height:r.height}}),t("defs",[t("clipPath",{attrs:{id:a}},[i||t("rect",{attrs:{x:"0",y:"0",rx:"5",ry:"5",width:r.width,height:r.height}})]),t("linearGradient",{attrs:{id:n}},[t("stop",{attrs:{offset:"0%","stop-color":r.primaryColor,"stop-opacity":r.primaryOpacity}},[r.animate?t("animate",{attrs:{attributeName:"offset",values:"-2; 1",dur:r.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"50%","stop-color":r.secondaryColor,"stop-opacity":r.secondaryOpacity}},[r.animate?t("animate",{attrs:{attributeName:"offset",values:"-1.5; 1.5",dur:r.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"100%","stop-color":r.primaryColor,"stop-opacity":r.primaryOpacity}},[r.animate?t("animate",{attrs:{attributeName:"offset",values:"-1; 2",dur:r.speed+"s",repeatCount:"indefinite"}}):null])])])])}},I={components:{ContentLoader:$}},R=I,U=Object(y["a"])(R,_,L,!1,null,null,null),B=U.exports;function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var q={name:"home",components:{Slide:g,Scroll:w["a"],RecommendList:j,SearchBar:k["a"],HomeSkeleton:B},mixins:[P["d"]],props:{},data(){return{banners:[],recommendSongs:[],newDiscs:[],songs:[],list:[],showSkeleton:!1}},watch:{},computed:T({},Object(D["mapGetters"])(["isLogin","loading"]),{title(){return this.list.name},picUrl(){return this.list.coverImgUrl},discId(){return this.list.id},allData(){return this.banners.concat(this.newDiscs,this.recommendSongs)}}),methods:T({},Object(D["mapMutations"])({setLoading:"SET_LOADING"}),{handleDisc(t){t.id&&this.$router.push({path:`/home/${t["id"]}`}),this.setLoading(!0),b["a"].getDisc(t.id).then(t=>{this.setLoading(!1),this.setList(t)})},getAllRecommend(){let t,e=b["a"].getBanner();t=this.isLogin?b["a"].getResource():b["a"].getRecommendSongs();let r=b["a"].getNewDisc();return Promise.all([e,t,r])},setAllRecommend(t){let e=c(t,3),r=e[0],s=e[1],i=e[2];this.setBanner(r),this.setRecommendSongs(s),this.setNewDisc(i)},setBanner(t){this.banners=t.banners},setRecommendSongs(t){this.isLogin?this.recommendSongs=t.recommend:this.recommendSongs=t.result},setNewDisc(t){this.newDiscs=t.playlists}}),activated(){this.$refs.scrolls.refresh()},created(){this.setLoading(!0),this.showSkeleton=!0,this.getAllRecommend().then(t=>{this.setLoading(!1),this.showSkeleton=!1,this.setAllRecommend(t)})}},K=q,M=(r("54f6"),Object(y["a"])(K,s,i,!1,null,"4f4d9271",null));e["default"]=M.exports},"22e2":function(t,e,r){},"2c6a":function(t,e,r){"use strict";var s=r("b292"),i=r.n(s);i.a},"42ba":function(t,e,r){"use strict";var s=r("e1d2");class i{static getBanner(){return Object(s["a"])("banner")}static getRecommend(){return Object(s["a"])("recommend")}static getRecommendSongs(){return Object(s["a"])("personalized",{params:{limit:6}})}static getNewSong(){return Object(s["a"])("newSong",{})}static getDisc(t){return Object(s["a"])("disc",{params:{id:t}})}static getNewDisc(){return Object(s["a"])("newDisc",{params:{order:"new",limit:6}})}static getResource(){return Object(s["a"])("resource",{params:{limit:6}})}static getAllSongList(t,e,r){return Object(s["a"])("newDisc",{params:{limit:10,cat:t,offset:e,order:r}})}static getCatList(){return Object(s["a"])("catList")}static getComment(t,e){return Object(s["a"])("comment",{params:{id:t,offset:e}})}}e["a"]=i},"54f6":function(t,e,r){"use strict";var s=r("bf9a"),i=r.n(s);i.a},"56f8":function(t,e,r){"use strict";var s=r("6820"),i=r.n(s);i.a},6534:function(t,e,r){"use strict";var s=r("22e2"),i=r.n(s);i.a},6820:function(t,e,r){},"76f3":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search-bar"},[r("input",{staticClass:"input",attrs:{type:"text",placeholder:t.placeholder,readonly:""},on:{click:t.clickInput}}),r("svg",{staticClass:"icon souso",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#icon-sousuo"}})])])},i=[],a=(r("ac6a"),r("ade3")),n=r("5880");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={name:"",components:{},props:{placeholder:{type:String,default:"搜歌手，搜歌曲"}},data(){return{}},watch:{},computed:c({},Object(n["mapGetters"])(["showFooter","query"])),methods:{clickInput(){this.$router.push({path:"/search"})}}},h=l,d=(r("6534"),r("2877")),u=Object(d["a"])(h,s,i,!1,null,"629a2112",null);e["a"]=u.exports},"92fa":function(t,e){var r=/^(attrs|props|on|nativeOn|class|style|hook)$/;function s(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var i,a,n,o,c;for(n in e)if(i=t[n],a=e[n],i&&r.test(n))if("class"===n&&("string"===typeof i&&(c=i,t[n]=i={},i[c]=!0),"string"===typeof a&&(c=a,e[n]=a={},a[c]=!0)),"on"===n||"nativeOn"===n||"hook"===n)for(o in a)i[o]=s(i[o],a[o]);else if(Array.isArray(i))t[n]=i.concat(a);else if(Array.isArray(a))t[n]=[i].concat(a);else for(o in a)i[o]=a[o];else t[n]=e[n];return t}),{})}},b292:function(t,e,r){},bf9a:function(t,e,r){}}]);
//# sourceMappingURL=home.a80526de.js.map
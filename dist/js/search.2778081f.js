(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"0e0f":function(t,e,s){},"214f":function(t,e,s){"use strict";s("b0c5");var n=s("2aba"),i=s("32e9"),r=s("79e5"),a=s("be13"),o=s("2b4c"),c=s("520a"),l=o("species"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var s="ab".split(t);return 2===s.length&&"a"===s[0]&&"b"===s[1]}();t.exports=function(t,e,s){var f=o(t),d=!r(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),m=d?!r(function(){var e=!1,s=/a/;return s.exec=function(){return e=!0,null},"split"===t&&(s.constructor={},s.constructor[l]=function(){return s}),s[f](""),!e}):void 0;if(!d||!m||"replace"===t&&!u||"split"===t&&!h){var g=/./[f],v=s(a,f,""[t],function(t,e,s,n,i){return e.exec===c?d&&!i?{done:!0,value:g.call(e,s,n)}:{done:!0,value:t.call(s,e,n)}:{done:!1}}),p=v[0],b=v[1];n(String.prototype,t,p),i(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28e1":function(t,e,s){"use strict";var n=s("0e0f"),i=s.n(n);i.a},"386d":function(t,e,s){"use strict";var n=s("cb7c"),i=s("83a1"),r=s("5f1b");s("214f")("search",1,function(t,e,s,a){return[function(s){var n=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,n):new RegExp(s)[e](String(n))},function(t){var e=a(s,t,this);if(e.done)return e.value;var o=n(t),c=String(this),l=o.lastIndex;i(l,0)||(o.lastIndex=0);var u=r(o,c);return i(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]})},4160:function(t,e,s){"use strict";var n=s("a38e"),i=s.n(n);i.a},"512b":function(t,e,s){"use strict";var n=s("d225"),i=s("b0b4"),r=s("e1d2"),a=function(){function t(){Object(n["a"])(this,t)}return Object(i["a"])(t,null,[{key:"singer",value:function(){return Object(r["a"])("artist",{})}},{key:"getSingerDetail",value:function(t){return Object(r["a"])("singerDetail",{params:{id:t}})}}]),t}();e["a"]=a},"520a":function(t,e,s){"use strict";var n=s("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,a=i,o="lastIndex",c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[o]||0!==e[o]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(a=function(t){var e,s,a,u,h=this;return l&&(s=new RegExp("^"+h.source+"$(?!\\s)",n.call(h))),c&&(e=h[o]),a=i.call(h,t),c&&a&&(h[o]=h.global?a.index+a[0].length:e),l&&a&&a.length>1&&r.call(a[0],s,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)}),a}),t.exports=a},"5dff":function(t,e,s){"use strict";var n=s("e415"),i=s.n(n);i.a},"5f1b":function(t,e,s){"use strict";var n=s("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var s=t.exec;if("function"===typeof s){var r=s.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},7978:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"pop-menu",on:{click:[t.hide,function(t){t.stopPropagation()}]}},[s("div",{staticClass:"list-wrapper",on:{click:function(t){t.stopPropagation()}}},[s("Scroll",{ref:"listContent",staticClass:"list-content",attrs:{data:t.scrollData}},[s("div",{staticClass:"item-wrapper"},[s("div",{staticClass:"header  item border-bottom",on:{click:t.play}},[t._v("\n            歌曲："+t._s(t.song.name)+"\n          ")]),s("div",{staticClass:"next-play item border-bottom",on:{click:t.playNext}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-play-circle"}})]),t._v("下一首播放\n          ")]),s("div",{staticClass:"like item border-bottom",on:{click:function(e){return t.toggleFavorite(t.song)}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.getFavoriteIcon(t.song)}})]),t._v("喜欢\n          ")]),s("div",{staticClass:"singer item border-bottom",on:{click:function(e){return t.toSinger(t.song)}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-user"}})]),t._v("歌手："+t._s(t.song.singer)+"\n          ")]),s("div",{staticClass:"singer item border-bottom"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-album"}})]),t._v("专辑："+t._s(t.song.album)+"\n          ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDelete,expression:"showDelete"}],staticClass:"delete item border-bottom",on:{click:function(e){return t.deleteOne(t.song)}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-close"}})]),t._v("删除\n          ")])])])],1)])])},i=[],r=s("cebc"),a=s("3ce5"),o=s("0712"),c=s("2f62"),l={name:"popMenu",components:{Scroll:a["a"]},mixins:[o["a"]],props:{showDelete:{type:Boolean,default:!1}},data:function(){return{isShow:!1,song:[]}},watch:{},computed:{scrollData:function(){var t=[this.song];return t}},methods:Object(r["a"])({},Object(c["b"])(["setTips"]),{show:function(t){this.isShow=!0,this.song=t},hide:function(){this.isShow=!1},playNext:function(){this.$emit("nextPlay",this.song),this.setTips("已经将一首歌曲添加到播放队列")},play:function(){this.$emit("playNow",this.song)},deleteOne:function(t){this.hide(),this.$emit("deleteOne",t),this.setTips("已经删除一首歌曲啦")}}),created:function(){},mounted:function(){}},u=l,h=(s("cf63"),s("2877")),f=Object(h["a"])(u,n,i,!1,null,"3221c0c0",null);e["a"]=f.exports},"79ce":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("search-bar",{ref:"searchbar"}),s("Scroll",{ref:"list",staticClass:"shortcut",attrs:{data:t.shortCut}},[s("div",[s("h3",{staticClass:"title"},[t._v("热门搜索")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],staticClass:"hots border-bottom"},t._l(t.hots,function(e){return s("div",{key:e.first,staticClass:"hot",on:{click:function(s){return t.setQuery(e.first)}}},[t._v("\n          "+t._s(e.first)+"\n        ")])}),0),s("History",{directives:[{name:"show",rawName:"v-show",value:!t.query&&t.searchHistory&&t.searchHistory.length>0,expression:"!query && searchHistory && searchHistory.length > 0"}],on:{selectItem:t.setQuery,deleteOne:t.deleteSearchHistory,deleteAll:t.showConfirm}})],1)]),s("Suggest",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],on:{handleAlbum:t.getAlbum,handleSinger:t.getSinger,handleSong:t.setSong}}),s("transition",{attrs:{name:"slide-left"}},[s("router-view",{ref:"musicList",attrs:{title:t.title,songs:t.songsList,picUrl:t.picUrl,id:t.id},on:{select:t.selectItem}})],1),s("Confirm",{ref:"confirm",attrs:{text:"确定要清空所有搜索历史吗"},on:{deleteAll:t.deleteAllSearchHistory}})],1)},i=[],r=(s("ac6a"),s("7f7f"),s("cebc")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-bar"},[s("svg",{staticClass:"icon back",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideSearch(e)}}},[s("use",{attrs:{"xlink:href":"#icon-left"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.queryArg,expression:"queryArg"}],ref:"input",staticClass:"input",attrs:{type:"text",placeholder:t.placeholder,autofocus:""},domProps:{value:t.queryArg},on:{input:function(e){e.target.composing||(t.queryArg=e.target.value)}}}),t.query?s("svg",{staticClass:"icon souso",attrs:{"aria-hidden":"true"},on:{click:t.deleteQuery}},[s("use",{attrs:{"xlink:href":"#icon-close"}})]):s("svg",{staticClass:"icon souso",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-sousuo"}})])])},o=[],c=s("2f62"),l={name:"",components:{},props:{placeholder:{type:String,default:"搜歌手，搜歌曲"}},data:function(){return{queryArg:""}},watch:{},computed:Object(r["a"])({},Object(c["c"])(["showFooter","query"])),methods:Object(r["a"])({},Object(c["d"])({setShowSearch:"SET_SHOW_SEARCH",setQuery:"SET_QUERY",setShowFooter:"SET_SHOW_FOOTER"}),{hideSearch:function(){this.setQuery(""),this.$router.go(-1)},deleteQuery:function(){this.setQuery("")}}),created:function(){var t=this;this.$watch("queryArg",function(e){t.setQuery(e)}),this.$watch("query",function(e){t.queryArg=e})}},u=l,h=(s("4160"),s("2877")),f=Object(h["a"])(u,a,o,!1,null,"5e624450",null),d=f.exports,m=s("d225"),g=s("b0b4"),v=s("e1d2"),p=function(){function t(){Object(m["a"])(this,t)}return Object(g["a"])(t,null,[{key:"getHotSearch",value:function(){return Object(v["a"])("hotSearch")}},{key:"getSuggest",value:function(t){return Object(v["a"])("suggest",{params:{keywords:t}})}},{key:"getAlbumDetail",value:function(t){return Object(v["a"])("album",{params:{id:t}})}}]),t}(),b=p,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"suggest"},[s("Scroll",{ref:"list",staticClass:"scroll-wrapper",attrs:{data:t.allData}},[s("div",{staticClass:"list-detail"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.album&&t.album.length>0,expression:"album && album.length > 0"}],staticClass:"album"},[s("ul",{staticClass:"list"},[s("h3",{staticClass:"title"},[t._v("专辑")]),t._l(t.album,function(e){return s("li",{key:e.albumId,staticClass:"item border-bottom",on:{click:function(s){return t.selectAlbum(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picUrl,expression:"item.picUrl"}],staticClass:"img",attrs:{alt:""}}),s("div",{staticClass:"right"},[s("div",{staticClass:"name"},[t._v("专辑："+t._s(e.name))]),s("div",{staticClass:"singer"},[t._v(t._s(e.singer))])])])})],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.artists&&t.artists.length>0,expression:"artists && artists.length > 0"}],staticClass:"artists"},[s("ul",{staticClass:"list"},[s("h3",{staticClass:"title"},[t._v("歌手")]),t._l(t.artists,function(e){return s("li",{key:e.id,staticClass:"item border-bottom",on:{click:function(s){return t.selectSinger(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picUrl,expression:"item.picUrl"}],staticClass:"img",attrs:{alt:""}}),s("div",{staticClass:"singer"},[t._v("歌手："+t._s(e.singer))])])})],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.songs&&t.songs.length>0,expression:"songs && songs.length > 0"}],staticClass:"songs"},[s("ul",{ref:"wrapper",staticClass:"song-list"},[s("h3",{staticClass:"title"},[t._v("歌曲")]),t._l(t.songs,function(e,n){return s("li",{key:e.id,staticClass:"song border-bottom",on:{click:function(s){return t.selectSong(e)}}},[s("div",{staticClass:"number"},[t._v(t._s(n+1))]),s("div",{staticClass:"right"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"singer"},[t._v("\n                "+t._s(e.singer)+" "),s("span",{staticClass:"album"},[t._v("-"+t._s(e.album))])])]),s("svg",{staticClass:"icon i-switch",attrs:{"aria-hidden":"true"},on:{click:function(s){return s.stopPropagation(),t.showPopOver(e)}}},[s("use",{attrs:{"xlink:href":"#icon-switch"}})])])})],2),s("pop-menu",{ref:"popMenu",on:{nextPlay:t.nextPlay,playNow:t.nowPlay}})],1)])])],1)},w=[],x=(s("386d"),s("3ce5")),S=s("0712"),C=s("7978"),_={name:"",components:{Scroll:x["a"],PopMenu:C["a"]},mixins:[S["b"],S["c"]],props:{},data:function(){return{page:1,album:[],artists:[],songs:[]}},watch:{query:function(t){""!==t&&this.search(t)}},computed:Object(r["a"])({},Object(c["c"])(["query"]),{allData:function(){return this.album.concat(this.artists,this.songs)}}),methods:{selectAlbum:function(t){this.$emit("handleAlbum",t)},selectSinger:function(t){this.$emit("handleSinger",t)},selectSong:function(t){this.$emit("handleSong",t)},search:function(t){var e=this;b.getSuggest(t).then(function(t){var s,n=t.result;s=n.albums&&n.albums[0].artist.picUrl?n.albums[0].artist.picUrl:"https://ws2.sinaimg.cn/large/006tNbRwly1fy54tapw58j30yl0u0h16.jpg",n.albums&&n.albums.length>0&&e.setAlbum(n.albums),n.artists&&n.artists.length>0&&e.setArtist(n.artists),n.songs&&n.songs.length>0&&e.setSongs(n.songs,s)})},setAlbum:function(t){var e=this;this.album=[],t.forEach(function(t){var s=t.id,n=t.name,i=t.artist.name,r=t.artist.picUrl;e.album.push({id:s,name:n,singer:i,picUrl:r})})},setArtist:function(t){var e=this;this.artists=[],t.forEach(function(t){var s=t.id,n=t.name,i=t.picUrl;e.artists.push({id:s,singer:n,picUrl:i})})},setSongs:function(t,e){var s=this;this.songs=[],t.forEach(function(t){var n=t.id,i=t.name,r=t.artists[0].name,a=t.album.name;s.songs.push({id:n,name:i,singer:r,picUrl:e,album:a})})}},created:function(){},mounted:function(){}},k=_,O=(s("b652"),Object(h["a"])(k,y,w,!1,null,"7aa24842",null)),j=O.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history"},[s("h3",{staticClass:"title"},[t._v("搜索历史")]),s("p",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteAll(e)}}},[t._v("清空历史")]),s("transition-group",{staticClass:"list",attrs:{tag:"ul",name:"list"}},t._l(t.searchHistory,function(e){return s("li",{key:e,staticClass:"item border-bottom",on:{click:function(s){return t.selectItem(e)}}},[s("span",{staticClass:"text"},[t._v(t._s(e))]),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(s){return s.stopPropagation(),t.deleteHistoryItem(e)}}},[s("use",{attrs:{"xlink:href":"#icon-close"}})])])}),0)],1)},E=[],H={name:"",components:{},props:{},data:function(){return{}},watch:{},computed:Object(r["a"])({},Object(c["c"])(["searchHistory"])),methods:{deleteHistoryItem:function(t){this.$emit("deleteOne",t)},selectItem:function(t){this.$emit("selectItem",t)},deleteAll:function(){this.$emit("deleteAll")}},created:function(){},mounted:function(){}},q=H,$=(s("28e1"),Object(h["a"])(q,A,E,!1,null,"4ae9ea16",null)),D=$.exports,N=s("512b"),U=s("ed08"),I=s("a32c"),P={name:"Search",components:{SearchBar:d,Suggest:j,History:D,Confirm:I["a"],Scroll:x["a"]},mixins:[S["b"]],props:{},data:function(){return{hots:[],songsList:[],list:{}}},watch:{query:function(t){var e=this;t||setTimeout(function(){e.$refs.list.refresh()},20)}},computed:Object(r["a"])({},Object(c["c"])(["query","searchHistory"]),{title:function(){return this.list.name},picUrl:function(){return this.list.picUrl},id:function(){return this.list.id},shortCut:function(){return this.hots.concat(this.searchHistory)}}),methods:Object(r["a"])({},Object(c["d"])({setQuery:"SET_QUERY"}),Object(c["b"])(["randomPlay","insertSong","insertSongNext","saveSearchHistory","deleteSearchHistory","deleteAllSearchHistory"]),{showConfirm:function(){this.$refs.confirm.show()},getAlbumDetail:function(t){var e=this;b.getAlbumDetail(t).then(function(s){var n=s.songs;e.setDetail(n,t)})},getDeatil:function(t){var e=this;N["a"].getSingerDetail(t).then(function(s){var n=s.hotSongs;e.setDetail(n,t)})},setDetail:function(t,e){this.songsList=this.normalizeSongs(t),this.$router.push({path:"/search/".concat(e)})},normalizeSongs:function(t){var e=[];return t.forEach(function(t){e.push(Object(U["c"])(t))}),e},getAlbum:function(t){this.saveSearchHistory(this.query),this.list=t;var e=t.id;this.getAlbumDetail(e)},getSinger:function(t){this.saveSearchHistory(this.query),this.list=t;var e=t.id;this.getDeatil(e)},setSong:function(t){this.saveSearchHistory(this.query),this.insertSong(t)},selectItem:function(t){this.insertSong(t)}}),created:function(){var t=this;b.getHotSearch().then(function(e){t.hots=e.result.hots})},mounted:function(){}},R=P,Q=(s("5dff"),Object(h["a"])(R,n,i,!1,null,"a1174af8",null));e["default"]=Q.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8f80":function(t,e,s){},a38e:function(t,e,s){},b0c5:function(t,e,s){"use strict";var n=s("520a");s("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b652:function(t,e,s){"use strict";var n=s("8f80"),i=s.n(n);i.a},cf63:function(t,e,s){"use strict";var n=s("e34f"),i=s.n(n);i.a},e34f:function(t,e,s){},e415:function(t,e,s){}}]);
//# sourceMappingURL=search.2778081f.js.map